<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Ajouter au dictionnaire</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="dismiss()">
        <ion-icon name="close-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div class="translation-form">
    <!-- Mot source -->
    <ion-item>
      <ion-label position="stacked">Mot à traduire</ion-label>
      <ion-input 
        [(ngModel)]="sourceWord" 
        placeholder="Entrez un mot"
        type="text">
      </ion-input>
      <ion-select 
        [(ngModel)]="sourceLang" 
        (ionChange)="onSourceLangChange()"
        interface="popover" 
        slot="end">
        <ion-select-option *ngFor="let lang of availableLanguages" [value]="lang.code">
          {{ lang.name }}
        </ion-select-option>
      </ion-select>
    </ion-item>

    <!-- Flèche indiquant la direction de traduction -->
    <div class="translation-direction">
      <ion-icon name="arrow-down-outline"></ion-icon>
    </div>

    <!-- Mot traduit -->
    <ion-item>
      <ion-label position="stacked">Traduction</ion-label>
      <ion-input 
        [(ngModel)]="targetWord" 
        placeholder="Traduction"
        type="text">
      </ion-input>
      <ion-select 
        [(ngModel)]="targetLang" 
        (ionChange)="onTargetLangChange()"
        interface="popover" 
        slot="end">
        <ion-select-option *ngFor="let lang of availableLanguages" [value]="lang.code">
          {{ lang.name }}
        </ion-select-option>
      </ion-select>
    </ion-item>

    <!-- Boutons d'action -->
    <div class="action-buttons">
      <ion-button 
        expand="block" 
        (click)="translateWord()" 
        [disabled]="!sourceWord || isTranslating">
        <ion-icon name="language-outline" slot="start"></ion-icon>
        {{ isTranslating ? 'Traduction en cours...' : 'Traduire' }}
      </ion-button>

      <ion-button 
        expand="block" 
        color="success" 
        (click)="addToDictionary()" 
        [disabled]="!sourceWord || !targetWord">
        <ion-icon name="add-circle-outline" slot="start"></ion-icon>
        Ajouter
      </ion-button>
    </div>

    <!-- Résultat détaillé de la traduction -->
    <ion-card *ngIf="translationResult">
      <ion-card-header>
        <ion-card-title>{{ translationResult.sourceWord }} → {{ translationResult.targetWord }}</ion-card-title>
        <ion-card-subtitle *ngIf="translationResult.partOfSpeech">
          {{ translationResult.partOfSpeech }}
        </ion-card-subtitle>
      </ion-card-header>

      <ion-card-content>
        <p *ngIf="translationResult.contextualMeaning">
          <strong>Signification:</strong> {{ translationResult.contextualMeaning }}
        </p>

        <div *ngIf="translationResult.examples && translationResult.examples.length > 0" class="examples">
          <p><strong>Exemples:</strong></p>
          <ul>
            <li *ngFor="let example of translationResult.examples">
              {{ example }}
            </li>
          </ul>
        </div>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content> 