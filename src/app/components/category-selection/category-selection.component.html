<ion-content class="category-content">
  <div class="container">
    <!-- Header compact et simplifié -->
    <div class="header-section">
      <!-- Sélection de la direction de traduction compacte -->
      <div class="direction-selector">
        <ion-segment [(ngModel)]="translationDirection" (ionChange)="changeTranslationDirection($event.detail.value)" class="compact-segment">
          <ion-segment-button value="fr2it">
            <ion-label>FR → IT</ion-label>
          </ion-segment-button>
          <ion-segment-button value="it2fr">
            <ion-label>IT → FR</ion-label>
          </ion-segment-button>
        </ion-segment>
      </div>
      
      <!-- Contrôle du nombre de mots à générer - ligne compacte -->
      <div class="words-count-selector">
        <ion-item lines="none" class="compact-words-item">
          <ion-label slot="start">Mots:</ion-label>
          <ion-input 
            type="number" 
            [(ngModel)]="wordsToGenerate" 
            min="3" 
            max="50"
            placeholder="10"
            class="words-count-input">
          </ion-input>
        </ion-item>
      </div>
    </div>
    
    <!-- Étape 1: Affichage des catégories principales -->
    <div *ngIf="!showTopics" class="categories-section">
      <div class="categories-grid">
        <div *ngFor="let category of categories" 
             class="category-card" 
             [class.selected]="selectedCategory === category.id" 
             (click)="selectCategory(category.id)">
          <div class="category-icon">
            <ion-icon [name]="category.icon"></ion-icon>
          </div>
          <div class="category-content">
            <h3 class="category-title">{{ category.name }}</h3>
          </div>
          <div class="category-arrow">
            <ion-icon name="chevron-forward"></ion-icon>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Étape 2: Affichage des sous-catégories -->
    <div *ngIf="showTopics && selectedCategory" class="topics-section">
      <div class="topics-header">
        <h2 class="topics-title">Choisissez un sujet</h2>
      </div>
      
      <div class="topics-list">
        <div *ngFor="let topic of getTopicsForCategory()" 
             class="topic-item" 
             (click)="confirmStartSession(topic)">
          <span class="topic-text">{{ topic }}</span>
          <ion-icon name="chevron-forward" class="topic-arrow"></ion-icon>
        </div>
      </div>
    </div>
  </div>
</ion-content>

<!-- Boîte de dialogue de confirmation -->
<ion-alert
  [isOpen]="showConfirmation"
  [header]="'Démarrer une session'"
  [message]="'Voulez-vous démarrer une session d\'apprentissage sur le thème : ' + selectedTopic + ' ?'"
  [buttons]="alertButtons"
></ion-alert>

<!-- Indicateur de chargement -->
<ion-loading
  [isOpen]="isLoading"
  message="Génération de votre session d'apprentissage..."
></ion-loading>
